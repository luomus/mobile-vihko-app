{
    "data": {
      "form": {
        "schema": {
          "type": "object",
          "properties": {
            "editors": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "title": "Edit rights",
              "excludeFromCopy": true
            },
            "secureLevel": {
              "type": "string",
              "enum": [
                "MX.secureLevelNone",
                "MX.secureLevelKM10"
              ],
              "enumNames": [
                "None",
                "10 km"
              ],
              "title": "The control's geographic information is public in detail",
              "excludeFromCopy": true,
              "default": "MX.secureLevelNone"
            },
            "gatheringEvent": {
              "type": "object",
              "properties": {
                "leg": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "title": "",
                  "excludeFromCopy": true
                },
                "legPublic": {
                  "type": "boolean",
                  "title": "Controller names are public",
                  "excludeFromCopy": true,
                  "default": false
                },
                "dateBegin": {
                  "type": "string",
                  "title": "Start date",
                  "excludeFromCopy": true
                },
                "dateEnd": {
                  "type": "string",
                  "title": "End date",
                  "excludeFromCopy": true
                }
              },
              "required": [],
              "title": ""
            },
            "keywords": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "title": "Keywords"
            },
            "gatherings": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "geometry": {
                    "type": "object",
                    "properties": {},
                    "title": "Coordinates"
                  },
                  "locality": {
                    "type": "string",
                    "title": ""
                  },
                  "notes": {
                    "type": "string",
                    "title": "Notes"
                  },
                  "habitat": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "enum": [
                        "",
                        "MY.habitatEnumValue1",
                        "MY.habitatEnumValue2",
                        "MY.habitatEnumValue3",
                        "MY.habitatEnumValue4",
                        "MY.habitatEnumValue5",
                        "MY.habitatEnumValue6",
                        "MY.habitatEnumValue7",
                        "MY.habitatEnumValue8",
                        "MY.habitatEnumValue9",
                        "MY.habitatEnumValue10",
                        "MY.habitatEnumValue11",
                        "MY.habitatEnumValue12",
                        "MY.habitatEnumValue13",
                        "MY.habitatEnumValue14",
                        "MY.habitatEnumValue15",
                        "MY.habitatEnumValue16",
                        "MY.habitatEnumValue17",
                        "MY.habitatEnumValue18",
                        "MY.habitatEnumValue19",
                        "MY.habitatEnumValue20",
                        "MY.habitatEnumValue21",
                        "MY.habitatEnumValue22",
                        "MY.habitatEnumValue23",
                        "MY.habitatEnumValue24",
                        "MY.habitatEnumValue25",
                        "MY.habitatEnumValue26",
                        "MY.habitatEnumValue27",
                        "MY.habitatEnumValue28",
                        "MY.habitatEnumValue29",
                        "MY.habitatEnumValue30",
                        "MY.habitatEnumValue31",
                        "MY.habitatEnumValue32",
                        "MY.habitatEnumValue33",
                        "MY.habitatEnumValue34",
                        "MY.habitatEnumValue35",
                        "MY.habitatEnumValue36",
                        "MY.habitatEnumValue87",
                        "MY.habitatEnumValue37",
                        "MY.habitatEnumValue38",
                        "MY.habitatEnumValue39",
                        "MY.habitatEnumValue40",
                        "MY.habitatEnumValue41",
                        "MY.habitatEnumValue42",
                        "MY.habitatEnumValue43",
                        "MY.habitatEnumValue44",
                        "MY.habitatEnumValue45",
                        "MY.habitatEnumValue46",
                        "MY.habitatEnumValue47",
                        "MY.habitatEnumValue48",
                        "MY.habitatEnumValue49",
                        "MY.habitatEnumValue50",
                        "MY.habitatEnumValue51",
                        "MY.habitatEnumValue52",
                        "MY.habitatEnumValue53",
                        "MY.habitatEnumValue54",
                        "MY.habitatEnumValue55",
                        "MY.habitatEnumValue56",
                        "MY.habitatEnumValue57",
                        "MY.habitatEnumValue58",
                        "MY.habitatEnumValue59",
                        "MY.habitatEnumValue60",
                        "MY.habitatEnumValue61",
                        "MY.habitatEnumValue62",
                        "MY.habitatEnumValue63",
                        "MY.habitatEnumValue64",
                        "MY.habitatEnumValue65",
                        "MY.habitatEnumValue66",
                        "MY.habitatEnumValue67",
                        "MY.habitatEnumValue68",
                        "MY.habitatEnumValue69",
                        "MY.habitatEnumValue70",
                        "MY.habitatEnumValue71",
                        "MY.habitatEnumValue72",
                        "MY.habitatEnumValue73",
                        "MY.habitatEnumValue74",
                        "MY.habitatEnumValue75",
                        "MY.habitatEnumValue76",
                        "MY.habitatEnumValue77",
                        "MY.habitatEnumValue78",
                        "MY.habitatEnumValue79",
                        "MY.habitatEnumValue80",
                        "MY.habitatEnumValue81",
                        "MY.habitatEnumValue82",
                        "MY.habitatEnumValue83",
                        "MY.habitatEnumValue84",
                        "MY.habitatEnumValue85",
                        "MY.habitatEnumValue86"
                      ],
                      "enumNames": [
                        "",
                        "Forest",
                        "Heath forest",
                        "Mesic heath forest",
                        "Herb-rich heath forest",
                        "Sub-xeric heath forest",
                        "Xeric heath forest",
                        "Herb-rich forest",
                        "Dry herb-rich forest",
                        "Mesic herb-rich forest",
                        "Moist herb-rich forest",
                        "Herb-rich forest with broadleaved deciduous trees",
                        "Herb-rich mountain birch forests",
                        "Mountain birch forest (excluding herb-rich mountain birch forest)",
                        "Mire",
                        "Open mire",
                        "Rich fen",
                        "Fen",
                        "Open swamp",
                        "Wooded mire",
                        "Pine mire and bog",
                        "Spruce mire",
                        "Scrub swamp",
                        "Swamp",
                        "Water",
                        "Spring complex",
                        "Streams or a brook",
                        "Shore",
                        "Flooded forest",
                        "Shore scrub",
                        "Swamp shore",
                        "Meadow shore",
                        "Reedbred",
                        "Gravel and shingle shores",
                        "Sand beach",
                        "Unvegetated flood shore",
                        "Rock outcrop and scree",
                        "Siliceous rock outcrops",
                        "Lichen rock outcrop and scree",
                        "Graminoid dwarf shrub rock outcrop and scree",
                        "Rock outcrop and scree deficient of trees",
                        "Forest on rocky terrain",
                        "Calcareous rock outcrop and quarry, bare calcareous land",
                        "Serpentine rock outcrop or land",
                        "Rock meadow",
                        "Fell area",
                        "Mountain heath",
                        "Mountain meadow",
                        "Snowbed",
                        "Mountain heath scrub",
                        "Paljakan lähteikkö tai tihkupintaOroarctic/mountain spring complexes and habitats",
                        "Paljakan kallio tai kivikkoOroarctic/ rocky outcrop and scree",
                        "Oroarctic mountain mire",
                        "Paljakan järvi tai lampi (sis. ranta)Oroarctic/mountain lake",
                        "Paljakan virtavesi (sis. purot ja rannat)Oroarctic/mountain brookside or a stream",
                        "Rock face",
                        "Rural biotopes and cultural habitats or other human-impacted environment",
                        "Rural biotopes and cultural habitats",
                        "Dry meadow",
                        "Heath",
                        "Mesic meadow",
                        "Wooded pasture and meadow",
                        "Moist meadow (other than shore meadow)",
                        "Fen meadow",
                        "Rock meadow",
                        "Ditch or other excavation",
                        "Roadsides (verges, banks etc.)",
                        "Agricultural land",
                        "Field",
                        "Lawn or grass",
                        "Tree and bush plantation",
                        "Abandoned field",
                        "Park, courtyard or garden",
                        "Park",
                        "Manor garden",
                        "Graveyard",
                        "Courtyard",
                        "Garden",
                        "Open grass",
                        "Scrub",
                        "Secondary habitats",
                        "Roadsides (verges, banks, on the road etc.)",
                        "Dumpling area",
                        "Fill-up soil",
                        "Sand and gravel pit",
                        "Peat production area",
                        "Quarry and mine area",
                        "Ruderate habitats and areas"
                      ]
                    },
                    "uniqueItems": true,
                    "title": ""
                  },
                  "images": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "title": "Images",
                    "excludeFromCopy": true
                  },
                  "gatheringType": {
                    "type": "string",
                    "enum": [
                      "",
                      "MY.gatheringTypeForagingArea",
                      "MY.gatheringTypeBreedingAndRestingArea",
                      "MY.gatheringTypeCavityTree",
                      "MY.gatheringTypeDroppingsTree",
                      "MY.gatheringTypeNestTree",
                      "MY.gatheringTypeLolifeAccess",
                      "MY.gatheringTypeLolifeCoreZone",
                      "MY.gatheringTypeLolifeHabitatZone",
                      "MY.gatheringTypeLolifeApplicableZone",
                      "MY.gatheringTypeWaterbirdPoint",
                      "MY.gatheringTypeWaterbirdRound"
                    ],
                    "enumNames": [
                      "",
                      "Foraging area",
                      "Breeding and resting area",
                      "Cavity tree",
                      "Droppings tree",
                      "Nest tree",
                      "Access route",
                      "Core zone",
                      "Habitat zone",
                      "Applicable zone",
                      "Point",
                      "Round"
                    ],
                    "title": "Aluerajaus"
                  },
                  "units": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "count": {
                          "type": "string",
                          "title": "Count"
                        },
                        "taxonConfidence": {
                          "type": "string",
                          "enum": [
                            "MY.taxonConfidenceSure",
                            "MY.taxonConfidenceUnsure"
                          ],
                          "enumNames": [
                            "Sure",
                            "Unsure"
                          ],
                          "title": "",
                          "default": "MY.taxonConfidenceSure"
                        },
                        "notes": {
                          "type": "string",
                          "title": "Notes"
                        },
                        "identifications": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "taxonID": {
                                "type": "string",
                                "title": "Laji",
                                "default": "MX.48243"
                              }
                            },
                            "required": []
                          },
                          "minItems": 1,
                          "title": ""
                        },
                        "recordBasis": {
                          "type": "string",
                          "enum": [
                            "",
                            "MY.recordBasisPreservedSpecimen",
                            "MY.recordBasisHumanObservationSeen",
                            "MY.recordBasisHumanObservationPhoto",
                            "MY.recordBasisHumanObservationVideo",
                            "MY.recordBasisHumanObservationIndirect"
                          ],
                          "enumNames": [
                            "",
                            "Preserved specimen",
                            "Seen",
                            "Photographed",
                            "Video recording",
                            "Indirect observation (footprints, feces, etc)"
                          ],
                          "title": "Record type"
                        },
                        "nestType": {
                          "type": "string",
                          "enum": [
                            "MY.nestTypeTreeCavity",
                            "MY.nestTypeTwig",
                            "MY.nestTypeNestBox",
                            "MY.nestTypeBuilding",
                            "MY.nestTypeGroundCavity",
                            "MY.nestTypeOther"
                          ],
                          "enumNames": [
                            "Cavity in tree",
                            "Twig nest in tree",
                            "Nestbox in tree",
                            "Building",
                            "Ground cavity",
                            "Other, which?"
                          ],
                          "title": "Nest type"
                        },
                        "nestNotes": {
                          "type": "string",
                          "title": "Nest notes"
                        },
                        "nestCount": {
                          "type": "integer",
                          "minimum": 0,
                          "title": "Nest/cavity count"
                        },
                        "indirectObservationType": {
                          "type": "string",
                          "enum": [
                            "MY.indirectObservationTypeFeces",
                            "MY.indirectObservationTypeSnowTracks",
                            "MY.indirectObservationTypeUrine",
                            "MY.indirectObservationTypeFeasting",
                            "MY.indirectObservationTypeFoodStock"
                          ],
                          "enumNames": [
                            "Feces",
                            "Snow tracks",
                            "Urine",
                            "Feasting",
                            "Food stock"
                          ],
                          "title": "Tracks"
                        },
                        "lifeStage": {
                          "type": "string",
                          "enum": [
                            "MY.lifeStageDead",
                            "MY.lifeStageAlive"
                          ],
                          "enumNames": [
                            "dead",
                            "alive"
                          ],
                          "title": "Life stage"
                        },
                        "unitGathering": {
                          "type": "object",
                          "properties": {
                            "geometry": {
                              "type": "object",
                              "properties": {},
                              "title": "Coordinates"
                            }
                          },
                          "required": [],
                          "title": ""
                        },
                        "unitFact": {
                          "type": "object",
                          "properties": {
                            "lolifeDroppingsType": {
                              "type": "string",
                              "enum": [
                                "",
                                "MY.lolifeDroppingsTypeRock",
                                "MY.lolifeDroppingsTypeTree",
                                "MY.lolifeDroppingsTypeTreeGroup",
                                "MY.lolifeDroppingsTypeOther"
                              ],
                              "enumNames": [
                                "",
                                "On top of rock",
                                "Single tree",
                                "Group of trees",
                                "Other, describe in notes"
                              ],
                              "title": "Droppings type"
                            },
                            "lolifeDroppingsCount": {
                              "type": "string",
                              "enum": [
                                "",
                                "MY.lolifeDroppingsCount1",
                                "MY.lolifeDroppingsCount2",
                                "MY.lolifeDroppingsCount3"
                              ],
                              "enumNames": [
                                "",
                                "",
                                "",
                                ""
                              ],
                              "title": "Droppings count"
                            },
                            "lolifeDroppingsQuality": {
                              "type": "string",
                              "enum": [
                                "",
                                "MY.lolifeDroppingsQuality1",
                                "MY.lolifeDroppingsQuality2"
                              ],
                              "enumNames": [
                                "",
                                "",
                                ""
                              ],
                              "title": "MY.lolifeDroppingsQuality"
                            },
                            "lolifeNestTree": {
                              "type": "string",
                              "enum": [
                                "",
                                "MX.38590",
                                "MX.37812",
                                "MX.37999",
                                "MX.37993",
                                "MX.38010",
                                "MX.38008",
                                "MY.lolifeNestTreeOther"
                              ],
                              "enumNames": [
                                "",
                                "Common aspen",
                                "Norway spruce",
                                "Downy birch",
                                "Silver birch",
                                "Grey alder",
                                "Common alder",
                                "Other, describe in notes"
                              ],
                              "title": "Tree species"
                            }
                          },
                          "required": [],
                          "title": ""
                        },
                        "images": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "title": "Images",
                          "excludeFromCopy": true
                        }
                      },
                      "required": []
                    },
                    "uniqueItems": false,
                    "title": "Observations"
                  },
                  "biologicalProvince": {
                    "type": "string",
                    "title": "Biogeographical province"
                  }
                },
                "required": []
              },
              "title": ""
            }
          },
          "required": [
            "gatherings"
          ]
        },
        "uiSchema": {
          "ui:shortcuts": {
            "alt": {
              "fn": "help",
              "delay": 1
            },
            "alt+F5": {
              "fn": "revalidate"
            },
            "Enter": {
              "fn": "navigate"
            },
            "shift+Enter": {
              "fn": "navigate",
              "reverse": true
            },
            "ctrl+Enter": {
              "fn": "textareaRowInsert"
            },
            "alt+ ": {
              "fn": "navigate"
            },
            "alt+shift+ ": {
              "fn": "navigate",
              "reverse": true
            },
            "alt+n": {
              "fn": "navigateArray"
            },
            "alt+p": {
              "fn": "navigateArray",
              "reverse": true
            }
          },
          "ui:order": [
            "gatheringEvent",
            "gatherings"
          ],
          "ui:field": "InjectField",
          "ui:options": {
            "injections": {
              "fields": [
                "editors",
                "secureLevel",
                "keywords"
              ],
              "target": "gatheringEvent"
            }
          },
          "gatheringEvent": {
            "ui:field": "NestField",
            "classNames": "well well-sm",
            "ui:order": [
              "*",
              "legPublic",
              "secureLevel",
              "eventTime",
              "keywords"
            ],
            "ui:options": {
              "nests": {
                "legEditor": {
                  "fields": [
                    "leg",
                    "editors"
                  ],
                  "rootUiSchema": {
                    "ui:field": "NestField",
                    "ui:options": {
                      "nests": {
                        "_legEditor": {
                          "fields": [
                            "leg",
                            "editors"
                          ],
                          "title": "",
                          "rootUiSchema": {
                            "ui:functions": [
                              {
                                "ui:field": "DependentBooleanField",
                                "ui:options": {
                                  "booleanField": "editors",
                                  "booleanDefiner": "leg"
                                }
                              },
                              {
                                "ui:field": "ArrayCombinerField"
                              }
                            ],
                            "ui:field": "TableField",
                            "ui:options": {
                              "specialRules": "legEditors",
                              "ui:buttonsDesktopLayout": true,
                              "buttons": [
                                {
                                  "fn": "add",
                                  "label": "Add an observer"
                                }
                              ]
                            },
                            "items": {
                              "ui:functions": {
                                "ui:field": "ContextInjectionField",
                                "ui:options": {
                                  "injections": {
                                    "/ui:options/rules/0/regexp": "/creator"
                                  }
                                }
                              },
                              "ui:field": "DependentDisableField",
                              "ui:options": {
                                "rules": [
                                  {
                                    "disableDefiner": "leg",
                                    "disableField": "editors",
                                    "regexp": "creator is injected here",
                                    "inlineHelp": "You must be an editor.",
                                    "disabledValueToDisplay": true
                                  },
                                  {
                                    "disableDefiner": "leg",
                                    "disableField": "editors",
                                    "regexp": "^((?!(MA\\.\\d)).)*$"
                                  }
                                ]
                              }
                            }
                          }
                        },
                        "legEditorSizeFixer": {
                          "fields": [
                            "_legEditor"
                          ],
                          "title": "",
                          "rootUiSchema": {
                            "ui:grid": {
                              "lg": 6,
                              "md": 6,
                              "sm": 9,
                              "xs": 12
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "eventTime": {
                  "fields": [
                    "dateBegin",
                    "dateEnd"
                  ],
                  "title": "",
                  "rootUiSchema": {
                    "ui:grid": {
                      "lg": {
                        "dateBegin": 3,
                        "dateEnd": 2
                      },
                      "md": {
                        "dateBegin": 4,
                        "dateEnd": 2
                      },
                      "sm": {
                        "dateBegin": 5,
                        "dateEnd": 3
                      },
                      "xs": 12
                    }
                  }
                }
              }
            },
            "leg": {
              "ui:widget": "AutosuggestWidget",
              "ui:help": "@legHelp",
              "ui:options": {
                "autosuggestField": "friends",
                "allowNonsuggestedValue": true,
                "suggestionReceive": "key",
                "preventTypingPattern": "^MA\\.\\d+$"
              }
            },
            "dateBegin": {
              "ui:widget": "DateTimeWidget",
              "ui:options": {
                "showButtons": true
              }
            },
            "dateEnd": {
              "ui:widget": "DateTimeWidget"
            },
            "legPublic": {
              "ui:options": {
                "allowUndefined": false
              },
              "ui:help": "You can hide the observer names if needed by selecting \"No\". The observer names are always available to authoritatives."
            }
          },
          "editors": {
            "ui:help": "If you report an identified user as an observer and the user has added you as a friend, you can give the user rights to edit this field trip report. Additionally observations from this field trip report are shown to this particular user among his/her own observations.",
            "ui:options": {
              "allowUndefined": false
            }
          },
          "secureLevel": {
            "ui:widget": "AnyToBooleanWidget",
            "ui:help": "By selecting \"No\" the observations geographic information will be coarsened to a 10 x 10 km² square in public material. The geographic information will always be available to authoritatives in detail. Images attached to coarsened observations are public.",
            "ui:options": {
              "trueValue": "MX.secureLevelNone",
              "falseValue": "MX.secureLevelKM10",
              "allowUndefined": false
            }
          },
          "keywords": {
            "ui:field": "TagArrayField"
          },
          "gatherings": {
            "items": {
              "dateBegin": {
                "ui:options": {
                  "showButtons": true
                },
                "ui:widget": "DateTimeWidget"
              },
              "dateEnd": {
                "ui:widget": "DateTimeWidget"
              },
              "geometry": {
                "ui:field": "HiddenField"
              },
              "images": {
                "ui:field": "ImageArrayField",
                "ui:options": {
                  "capturerVerbatimPath": "/gatheringEvent/leg"
                }
              },
              "namedPlaceID": {
                "ui:field": "HiddenField"
              },
              "locality": {
                "ui:widget": "TextareaWidget"
              },
              "biologicalProvince": {
                "ui:field": "HiddenField"
              },
              "taxonCensus": {
                "items": {
                  "censusTaxonID": {
                    "ui:options": {
                      "allowNonsuggestedValue": true,
                      "autosuggestField": "taxon",
                      "suggestionReceive": "key"
                    },
                    "ui:widget": "AutosuggestWidget"
                  }
                }
              },
              "ui:functions": [
                {
                  "ui:field": "ConditionalOnChangeField",
                  "ui:options": {
                    "rules": [
                      {
                        "transformations": {
                          "units": []
                        },
                        "conditions": {
                          "gatheringType": {
                            "regexp": "MY.gatheringTypeCavityTree"
                          }
                        }
                      },
                      {
                        "transformations": {
                          "units": [
                            {
                              "identifications": [
                                {
                                  "taxonID": "MX.48243"
                                }
                              ],
                              "recordBasis": "MY.recordBasisHumanObservationIndirect",
                              "breeding": true
                            }
                          ]
                        },
                        "conditions": {
                          "gatheringType": {
                            "regexp": "MY.gatheringTypeNestTree"
                          }
                        }
                      },
                      {
                        "transformations": {
                          "units": [
                            {
                              "identifications": [
                                {
                                  "taxonID": "MX.48243"
                                }
                              ],
                              "recordBasis": "MY.recordBasisHumanObservationIndirect"
                            }
                          ]
                        },
                        "conditions": {
                          "gatheringType": {
                            "regexp": "MY.gatheringTypeDroppingsTree"
                          }
                        }
                      },
                      {
                        "transformations": {
                          "units": [
                            {
                              "identifications": [
                                {
                                  "taxonID": "MX.48243"
                                }
                              ]
                            }
                          ]
                        },
                        "conditions": {
                          "gatheringType": {
                            "regexp": "^$"
                          }
                        }
                      }
                    ]
                  }
                }
              ],
              "gatheringType": {
                "ui:field": "HiddenField"
              },
              "units": {
                "ui:field": "MultiArrayField",
                "ui:options": {
                  "groups": [
                    {
                      "rules": {
                        "field": "lifeStage",
                        "regexp": "^.+$"
                      },
                      "operations": {
                        "type": "merge",
                        "uiSchema": {
                          "ui:title": "Observations",
                          "ui:options": {
                            "buttons": [
                              {
                                "default": {
                                  "lifeStage": "MY.lifeStageAlive"
                                },
                                "fn": "addPredefined",
                                "glyph": "plus",
                                "label": "Add observation"
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "rules": {
                        "field": "indirectObservationType",
                        "regexp": "^(|MY.indirectObservationTypeFeces)$",
                        "complement": true
                      },
                      "operations": {
                        "type": "merge",
                        "uiSchema": {
                          "ui:title": "Track observations",
                          "ui:options": {
                            "buttons": [
                              {
                                "default": {
                                  "indirectObservationType": "MY.indirectObservationTypeSnowTracks",
                                  "recordBasis": "MY.recordBasisHumanObservationIndirect"
                                },
                                "fn": "addPredefined",
                                "glyph": "plus",
                                "label": "Add traces"
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "rules": {
                        "field": "nestType",
                        "regexp": "^.+$"
                      },
                      "operations": {
                        "type": "merge",
                        "uiSchema": {
                          "ui:title": "Nest observations",
                          "ui:options": {
                            "buttons": [
                              {
                                "default": {
                                  "nestType": "MY.nestTypeTreeCavity",
                                  "recordBasis": "MY.recordBasisHumanObservationIndirect"
                                },
                                "fn": "addPredefined",
                                "glyph": "plus",
                                "label": "Add nest site"
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "rules": {
                        "field": "indirectObservationType",
                        "regexp": "^MY.indirectObservationTypeFeces"
                      },
                      "operations": {
                        "type": "merge",
                        "uiSchema": {
                          "ui:title": "Droppings observations",
                          "ui:options": {
                            "buttons": [
                              {
                                "default": {
                                  "indirectObservationType": "MY.indirectObservationTypeFeces",
                                  "recordBasis": "MY.recordBasisHumanObservationIndirect"
                                },
                                "fn": "addPredefined",
                                "glyph": "plus",
                                "key": "3",
                                "label": "Add droppings"
                              }
                            ]
                          }
                        }
                      }
                    }
                  ],
                  "renderAdd": false
                },
                "items": {
                  "ui:functions": [
                    {
                      "ui:field": "ConditionalUiSchemaField",
                      "ui:options": {
                        "cases": [
                          {
                            "operations": {
                              "type": "merge",
                              "uiSchema": {
                                "ui:options": {
                                  "color": "#9e713b"
                                }
                              }
                            },
                            "rules": {
                              "field": "nestType",
                              "regexp": "^.+$"
                            }
                          },
                          {
                            "operations": {
                              "type": "merge",
                              "uiSchema": {
                                "ui:options": {
                                  "color": "#b89220"
                                }
                              }
                            },
                            "rules": {
                              "field": "indirectObservationType",
                              "regexp": "^.+$"
                            }
                          }
                        ]
                      }
                    },
                    {
                      "ui:field": "FlatField",
                      "ui:options": {
                        "fields": [
                          "unitFact"
                        ]
                      }
                    },
                    {
                      "ui:field": "ScopeField",
                      "ui:options": {
                        "fields": [],
                        "glyphFields": [
                          {
                            "glyph": "camera",
                            "show": "images",
                            "label": "Add a photo",
                            "open": false
                          }
                        ],
                        "fieldScopes": {
                          "lifeStage": {
                            "+": {
                              "fields": [
                                "lifeStage",
                                "count",
                                "taxonConfidence",
                                "recordBasis",
                                "notes"
                              ],
                              "uiSchema": {
                                "recordBasis": {
                                  "ui:options": {
                                    "filterType": "blacklist",
                                    "filter": [
                                      "MY.recordBasisHumanObservationIndirect"
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "nestType": {
                            "+": {
                              "fields": [
                                "nestType",
                                "nestNotes",
                                "nestCount",
                                "taxonConfidence",
                                "unitFact_lolifeNestTree",
                                "notes"
                              ],
                              "uiSchema": {
                                "recordBasis": {
                                  "ui:field": "HiddenField"
                                },
                                "ui:order": [
                                  "nestType",
                                  "nestNotes",
                                  "nestCount",
                                  "taxonConfidence",
                                  "unitFact_lolifeNestTree",
                                  "notes",
                                  "*"
                                ],
                                "taxonConfidence": {
                                  "ui:title": ""
                                }
                              }
                            }
                          },
                          "indirectObservationType": {
                            "+": {
                              "fieldScopes": {
                                "indirectObservationType": {
                                  "MY.indirectObservationTypeFeces": {
                                    "fields": [
                                      "unitFact_lolifeDroppingsType",
                                      "unitFact_lolifeDroppingsCount",
                                      "unitFact_lolifeDroppingsQuality",
                                      "unitFact_lolifeNestTree",
                                      "notes"
                                    ],
                                    "uiSchema": {
                                      "indirectObservationType": {
                                        "ui:field": "HiddenField"
                                      },
                                      "ui:order": [
                                        "unitFact_lolifeDroppingsType",
                                        "unitFact_lolifeDroppingsCount",
                                        "unitFact_lolifeDroppingsQuality",
                                        "unitFact_lolifeNestTree",
                                        "notes",
                                        "*"
                                      ]
                                    }
                                  },
                                  "MY.indirectObservationTypeSnowTracks": {
                                    "refs": [
                                      "indirectObs"
                                    ]
                                  },
                                  "MY.indirectObservationTypeUrine": {
                                    "refs": [
                                      "indirectObs"
                                    ]
                                  },
                                  "MY.indirectObservationTypeFeasting": {
                                    "refs": [
                                      "indirectObs"
                                    ]
                                  },
                                  "MY.indirectObservationTypeFoodStock": {
                                    "refs": [
                                      "indirectObs"
                                    ]
                                  }
                                }
                              },
                              "uiSchema": {
                                "recordBasis": {
                                  "ui:field": "HiddenField"
                                }
                              }
                            }
                          }
                        },
                        "definitions": {
                          "indirectObs": {
                            "fields": [
                              "indirectObservationType",
                              "unitFact_lolifeNestTree",
                              "notes"
                            ],
                            "uiSchema": {
                              "indirectObservationType": {
                                "ui:options": {
                                  "filterType": "blacklist",
                                  "filter": [
                                    "MY.indirectObservationTypeFeces"
                                  ]
                                }
                              },
                              "ui:order": [
                                "*",
                                "indirectObservationType",
                                "unitFact_lolifeNestTree",
                                "notes"
                              ]
                            }
                          }
                        }
                      }
                    }
                  ],
                  "ui:field": "LocationChooserField",
                  "ui:options": {
                    "geometryField": "/unitGathering/geometry",
                    "strategy": "lolifeUnit"
                  },
                  "images": {
                    "ui:field": "ImageArrayField",
                    "ui:options": {
                      "capturerVerbatimPath": "/gatheringEvent/leg"
                    }
                  },
                  "identifications": {
                    "ui:field": "HiddenField"
                  },
                  "unitGathering": {
                    "ui:field": "HiddenField"
                  },
                  "lifeStage": {
                    "ui:widget": "AnyToBooleanWidget",
                    "ui:options": {
                      "label": "Alive?",
                      "trueValue": "MY.lifeStageAlive",
                      "falseValue": "MY.lifeStageDead",
                      "allowUndefined": false
                    }
                  },
                  "taxonConfidence": {
                    "ui:widget": "AnyToBooleanWidget",
                    "ui:options": {
                      "trueValue": "MY.taxonConfidenceSure",
                      "falseValue": "MY.taxonConfidenceUnsure",
                      "allowUndefined": false
                    }
                  },
                  "ui:grid": {
                    "lg": {
                      "taxonConfidence": 1,
                      "count": 1,
                      "*": 2
                    },
                    "md": {
                      "taxonConfidence": 1,
                      "count": 1,
                      "*": 2
                    },
                    "sm": {
                      "taxonConfidence": 2,
                      "count": 1,
                      "*": 2
                    },
                    "xs": 12
                  },
                  "ui:order": [
                    "taxonConfidence",
                    "recordBasis",
                    "count",
                    "lifeStage",
                    "nestType",
                    "nestNotes",
                    "nestCount",
                    "indirectObservationType",
                    "lolifeDroppingsType",
                    "lolifeDroppingsCount",
                    "lolifeDroppingsQuality",
                    "notes",
                    "*"
                  ]
                }
              },
              "ui:order": [
                "gatheringType",
                "*",
                "units"
              ],
              "ui:settings": [
                "%additionalFields/scopeField_gatherings"
              ],
              "title": "",
              "ui:grid": {
                "xs": {
                  "habitat": 6,
                  "notes": 6,
                  "locality": 12
                }
              }
            },
            "ui:field": "MapArrayField",
            "ui:title": "",
            "ui:options": {
              "ui:buttonsDesktopLayout": true,
              "buttons": [
                {
                  "glyph": "plus",
                  "fn": "addPredefined",
                  "key": "4",
                  "label": "Habitat zone",
                  "default": {
                    "gatheringType": "MY.gatheringTypeLolifeHabitatZone"
                  },
                  "help": "",
                  "tooltipPlacement": "left",
                  "tooltipClass": "lg",
                  "className": "text-left"
                },
                {
                  "glyph": "plus",
                  "fn": "addPredefined",
                  "key": "3",
                  "label": "Core zone",
                  "default": {
                    "gatheringType": "MY.gatheringTypeLolifeCoreZone"
                  },
                  "help": "",
                  "tooltipPlacement": "left",
                  "tooltipClass": "lg",
                  "className": "text-left"
                },
                {
                  "glyph": "plus",
                  "fn": "addPredefined",
                  "label": "Breeding and resting area",
                  "default": {
                    "gatheringType": "MY.gatheringTypeBreedingAndRestingArea"
                  },
                  "help": "",
                  "tooltipPlacement": "left",
                  "tooltipClass": "lg",
                  "className": "text-left"
                },
                {
                  "glyph": "plus",
                  "fn": "addPredefined",
                  "key": "1",
                  "label": "Foraging area",
                  "default": {
                    "gatheringType": "MY.gatheringTypeForagingArea"
                  },
                  "help": "",
                  "tooltipPlacement": "left",
                  "tooltipClass": "lg",
                  "className": "text-left"
                },
                {
                  "glyph": "plus",
                  "fn": "addPredefined",
                  "key": "2",
                  "label": "Access route",
                  "default": {
                    "gatheringType": "MY.gatheringTypeLolifeAccess"
                  },
                  "help": "",
                  "tooltipPlacement": "left",
                  "tooltipClass": "lg",
                  "className": "text-left"
                },
                {
                  "glyph": "plus",
                  "fn": "addPredefined",
                  "key": "5",
                  "label": "Applicable zone",
                  "default": {
                    "gatheringType": "MY.gatheringTypeLolifeApplicableZone"
                  },
                  "help": "",
                  "tooltipPlacement": "left",
                  "tooltipClass": "lg",
                  "className": "text-left"
                },
                {
                  "glyph": "plus",
                  "fn": "addPredefined",
                  "key": "6",
                  "label": "Terrain route",
                  "help": "",
                  "tooltipPlacement": "left",
                  "tooltipClass": "lg",
                  "className": "text-left"
                }
              ],
              "popupFields": [
                {
                  "field": "/gatheringType",
                  "template": "title"
                },
                {
                  "strategy": "lolifeUnit",
                  "template": "title",
                  "value": ""
                },
                {
                  "text": "/gatheringType",
                  "template": "description",
                  "value": ""
                }
              ],
              "titleFormat": "%{Title} %{idx}",
              "mapOptions": {
                "controls": {
                  "draw": {
                    "clear": true,
                    "delete": true,
                    "redo": false,
                    "reverse": true,
                    "undo": false
                  }
                }
              },
              "mapSizes": {
                "lg": 8,
                "md": 6,
                "sm": 6,
                "xs": 12
              },
              "minHeight": 435,
              "propsToPassToInlineSchema": [
                "formData"
              ],
              "resizeTimeout": 210,
              "hasActive": false,
              "geometryField": "geometry",
              "geometryMapper": "lolife",
              "nonRemovables": [
                0
              ],
              "inlineUiSchemaRoot": {
                "ui:functions": {
                  "ui:field": "FilterArrayField",
                  "ui:options": {
                    "rules": {
                      "idx": 0,
                      "complement": true
                    }
                  }
                },
                "ui:field": "SingleActiveArrayField",
                "ui:options": {
                  "renderAdd": false,
                  "confirmDelete": true,
                  "headerFormatters": [
                    {
                      "field": "gatheringType",
                      "default": "Terrain route"
                    },
                    "lolife"
                  ]
                }
              },
              "belowUiSchemaRoot": {
                "ui:field": "SingleItemArrayField",
                "ui:options": {
                  "activeIdx": 0
                }
              },
              "belowFields": [
                "units"
              ],
              "passActiveIdxToBelow": false
            },
            "ui:grid": {
              "lg": 2,
              "md": 2,
              "sm": 2,
              "xs": 12
            },
            "ui:settings": [
              "/mapOptions/tileLayerName",
              "/mapOptions/overlayNames",
              "/mapOptions/tileLayerOpacity",
              "/mapOptions/tileLayers"
            ]
          }
        }
      }
    }
  }